(function(){var isSP=ASTERISK.device.match(/sp/);if(isSP)return;var canvas;var stage;var hexs=[];var mode='common';var grad=["#64CDFA","#735EAA","#F058A4"];var rand_limit=function(min,max){return Math.floor(Math.random()*((max+1)-min)+min);};function resizer(){canvas.width=$(window).width();canvas.height=$(window).height();var count=hexs.length;for(i=0;i<count;i++){var hexagon=hexs[i];hexagon.reposition();}}function init(){canvas=document.getElementById('hexaGround');stage=new createjs.Stage(canvas);stage.enableMouseOver(10);canvas.width=$(window).width();canvas.height=$(window).height();mode=$('body').hasClass('top')?'top':'common';createjs.Ticker.setFPS(35);createjs.Ticker.addEventListener('tick',tick);var optNumber=(mode=='top')?40:Math.floor(canvas.width/48);GenerateHexagon(optNumber);var timer=false;$(window).on('resize',function(){if(timer!==false){clearTimeout(timer);}timer=setTimeout(function(){resizer();},200);});}function tick(){updateHexpos();stage.update();}function Hexagon(xpos,ypos,size){this.Shape_constructor();this.x=xpos;this.y=ypos;this.vy=0.2;this.alpha=(mode=='top')?Math.random():0.6*Math.random();this.mtx_a=Math.random();this.mtx_b=0;this.mtx_c=Math.random();this.mtx_d=-1;this.vo=0.008;this.va=0.01;if(mode!='top'){this.graphics.beginLinearGradientFill(grad,[0,0.5,1],0,-50,0,50).drawPolyStar(0,0,size,6,0,Math.random()*180);}else{this.graphics.beginFill('#fff').drawPolyStar(0,0,size,6,0,Math.random()*180);}}createjs.extend(Hexagon,createjs.Shape);createjs.promote(Hexagon,"Shape");Hexagon.prototype.move=function(){if(this.alpha<0.2){this.y-=this.vy;}else
if(this.alpha>0.2&&this.alpha<0.4){this.y-=this.vy*1.5;}else{this.y-=this.vy*2;}if(this.y<-70){this.y=canvas.height+70;this.vy=0.2;this.x=canvas.width*Math.random();}};Hexagon.prototype.revolve=function(){this.mtx_a+=this.vo;var matrix=new createjs.Matrix2D(this.mtx_a,this.mtx_b,this.mtx_c,this.mtx_d,this.x,this.y);matrix.decompose(this);if(this.mtx_a<-1||this.mtx_a>1){this.vo*=-1;}};Hexagon.prototype.reposition=function(){this.x=canvas.width*Math.random();};Hexagon.prototype.opacity=function(){this.alpha+=this.va;var alphaLimit=(mode=='top')?1:0.5;if(this.alpha>alphaLimit||this.alpha<0){this.va*=-1;}};function GenerateHexagon(amount){for(i=0;i<amount;i++){var _x=canvas.width*Math.random();var _y=canvas.height*Math.random();var _size=rand_limit(10,50);var hexagon=new Hexagon(_x,_y,_size);hexs[i]=hexagon;stage.addChild(hexagon);}}function updateHexpos(){var count=hexs.length;for(i=0;i<count;i++){var hexagon=hexs[i];hexagon.move();hexagon.revolve();hexagon.opacity();}}$(function(){init();});})();
